<table>
  <%
    notifications.each do |notification|
      visitor = notification.visitor
      visited = notification.visited
  %>
    <tr>
      <td><%= link_to visitor.username, user_path(visitor) %>さんが</td>
      <td>
      <%
      case notification.action
        when 'follow' then
      %>
          あなたをフォローしました。
      <% when 'like' then %>
          <%= link_to('あなたの投稿', notification.post) %>にいいねしました。
      <% when 'comment' then %>
          <% if notification.post.user_id == visited.id %>
            <%= link_to('あなたの投稿', notification.post) %>
          <% else %>
            <%= link_to(notification.post.user.name, post_path(notification.post)) %>さんの投稿
          <% end %>
          にコメントしました。
          <%= Comment.find_by(id: notification.comment_id).content %>
      <% end %>
      </td>
      <td><%= time_ago_in_words(notification.created_at).upcase %>前に作成</td>
    </tr>
  <% end %>
</table>